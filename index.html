<link rel="stylesheet" href="index.css">
<script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
<script type="text/javascript">
google.charts.load('current', { 'packages': ['corechart'] });
google.charts.setOnLoadCallback(drawChart);


var options = {
    legend: { position: 'bottom' },
    interpolateNulls: false
};

var tada
var chart

function getShown() {
    var showids = [0]
    var shown = document.getElementsByClassName("checkbox")
    for (let i = 0; i < shown.length; i++) {
        const element = shown[i];
        if (element.checked) {
            showids[showids.length] = parseInt(element.id)
        }
    }

    return showids
}

function doHide(sender) {
    //shown[sender.id] = !shown[sender.id]
    console.log(getShown())
    tada.setColumns(getShown())
    chart.draw(tada, options);
    //this.checked = shown[sender.id]
}


function transposeDataTable(dataTable) {
    //step 1: let us get what the columns would be
    var rows = [];//the row tip becomes the column header and the rest become
    for (var rowIdx = 0; rowIdx < dataTable.getNumberOfRows(); rowIdx++) {
        var rowData = [];
        for (var colIdx = 0; colIdx < dataTable.getNumberOfColumns(); colIdx++) {
            rowData.push(dataTable.getValue(rowIdx, colIdx));
        }
        rows.push(rowData);
    }
    var newTB = new google.visualization.DataTable();
    newTB.addColumn('string', dataTable.getColumnLabel(0));
    newTB.addRows(dataTable.getNumberOfColumns() - 1);
    var colIdx = 1;
    for (var idx = 0; idx < (dataTable.getNumberOfColumns() - 1); idx++) {
        var colLabel = dataTable.getColumnLabel(colIdx);
        newTB.setValue(idx, 0, colLabel);
        colIdx++;
    }
    for (var i = 0; i < rows.length; i++) {
        var rowData = rows[i];
        console.log(rowData[0]);
        newTB.addColumn('number', rowData[0]); //assuming the first one is always a header
        var localRowIdx = 0;

        for (var j = 1; j < rowData.length; j++) {
            newTB.setValue(localRowIdx, (i + 1), rowData[j]);
            localRowIdx++;
        }
    }
    return newTB;
}

function drawChart() {

    var data = transposeDataTable(google.visualization.arrayToDataTable([["Name","2021-01-02","2021-01-03","2021-01-06","2021-01-09","2021-01-12","2021-01-15","2021-01-16","2021-01-18","2021-01-20"], ["210","13630","13630","13630","13590","13580","12170","12120","12030","12090"], ["gt-1030","25380","25380","25230","25100","25320","24390","24990","24990","25970"], ["gt-710","12020","12020","11490","11610","11930","12000","11840","12000","11900"], ["gt-730","18990","20080","19640","19400","19850","19780","19780","20080","19880"], ["gtx-1050","54990","54990","51480","41815","54990","54990","54730","54990","54780"], ["gtx-1050-ti","49199","49199","55190","56990","58990","51275","58990","61631","58558"], ["gtx-1060","179924","179924","90330","179924","179924","174701","174701","174701","174701"], ["gtx-1070","179990","179990","179990","179990","179990","","","",""], ["gtx-1650","52990","59900","59900","57900","57900","66990","67380","71600","70270"], ["gtx-1650-super","65900","65900","65900","65900","65900","134946","133789","133789","109900"], ["gtx-1660","89990","89990","89990","76900","76900","","139900","124990","119900"], ["gtx-1660-super","91900","91900","91900","110900","110900","99140","149990","134990","139990"], ["gtx-1660-ti","112070","112070","128990","118140","118140","119322","118140","118140","102246"], ["p1000","117296","116107","115460","114370","117900","115912","115912","121000","121000"], ["p2000","173580","173580","170980","170880","170150","170580","168010","170150","168450"], ["p2200","168420","168376","165890","165771","164440","168530","164440","165740","164080"], ["p4000","303070","303070","298520","298409","298409","274900","274900","274900","274900"], ["p620","70450","70450","70450","69880","72320","64654","64642","64699","64699"], ["r7-240","26420","26420","25780","25780","26160","27840","27420","27840","27560"], ["rtx-2060","135900","135900","135900","135900","135900","","","",""], ["rtx-2070-super","","","","","","","","",""], ["rtx-2080-super","242820","242820","242820","242820","242820","","","","356390"], ["rtx-2080-ti","499990","499990","499990","499990","499990","399990","399990","499990","499990"], ["rtx-3060-ti","256990","256990","256990","239990","269990","299990","355990","","359990"], ["rtx-3070","293990","293990","257590","278240","299000","304990","309990","344990","329900"], ["rtx-3080","447990","447990","470056","409990","489990","","529990","529990",""], ["rtx-3090","641390","641390","641390","649786","735330","735330","643306","771990","769990"], ["rtx-4000","339049","336027","339049","336027","336027","336027","337000","338000","345280"], ["rtx-5000","786520","786520","774720","774720","786520","786520","774720","786520","778650"], ["rtx-6000","1800749","1800749","1779913","1733180","1778398","1772368","1746990","1772024","1754300"], ["rtx-8000","","","","2064090","","","2078080","","2080020"], ["rx-550","26190","27150","22290","28470","28900","29630","29620","29520","27189"], ["rx-5500-xt","76590","76590","76590","76590","76590","","109440","85500","105875"], ["rx-5600","157350","157350","157790","191880","177000","177000","","227660",""], ["rx-5600-xt","131690","131690","131690","131690","131690","","172500","",""], ["rx-570","65400","65400","64880","63900","63900","","126760","126760","125490"], ["rx-5700","145900","145900","145900","145900","145900","","","",""], ["rx-5700-xt","199900","199900","199000","162900","266680","","","327699",""], ["rx-580","77990","77990","81990","110840","110990","","128790","153471","120520"], ["rx-6800","416090","416090","415460","389900","389900","435900","389900","389900","392580"], ["rx-vega-56","161710","161710","161710","161710","","","","",""], ["wx-2100","55190","55190","54990","52490","52780","52790","52790","52790","52890"], ["wx-3100","68090","68090","67790","67190","67490","67490","67490","79190","79190"], ["wx-3200","71250","71250","71250","67090","67390","69780","71610","72100","72280"], ["wx-4100","106990","106990","106990","102990","103990","103990","103990","103990","104990"], ["wx-5100","152280","152280","152280","152280","152230","153630","146490","146790","146990"], ["wx-7100","","","","","285013","427566","283986","284239","283962"], ["wx-8200","401890","401890","401890","399720","394310","401900","403680","403680","407340"]]))

    tada = new google.visualization.DataView(data)
    tada.setColumns(getShown())

    chart = new google.visualization.LineChart(document.getElementById('curve_chart'));

    chart.draw(tada, options);
}
</script>

<div id="curve_chart" class="chart"></div>

<table>
    <thead>
        <tr>
            <td>
            <td>Name
            <td>Price
            <td>Performance
            <td>PpP
        </tr>
    </thead>

    <tbody>
        <tr>
    <td> <input type="checkbox" id="1" class="checkbox" onclick="doHide(this)" >
    <td> <label for="1">210</label>
    <td> 12090
</tr>
 <tr>
    <td> <input type="checkbox" id="2" class="checkbox" onclick="doHide(this)" >
    <td> <label for="2">gt-1030</label>
    <td> 25970
</tr>
 <tr>
    <td> <input type="checkbox" id="3" class="checkbox" onclick="doHide(this)" >
    <td> <label for="3">gt-710</label>
    <td> 11900
</tr>
 <tr>
    <td> <input type="checkbox" id="4" class="checkbox" onclick="doHide(this)" >
    <td> <label for="4">gt-730</label>
    <td> 19880
</tr>
 <tr>
    <td> <input type="checkbox" id="5" class="checkbox" onclick="doHide(this)" >
    <td> <label for="5">gtx-1050</label>
    <td> 54780
</tr>
 <tr>
    <td> <input type="checkbox" id="6" class="checkbox" onclick="doHide(this)" >
    <td> <label for="6">gtx-1050-ti</label>
    <td> 58558
</tr>
 <tr>
    <td> <input type="checkbox" id="7" class="checkbox" onclick="doHide(this)" >
    <td> <label for="7">gtx-1060</label>
    <td> 174701
</tr>
 <tr>
    <td> <input type="checkbox" id="8" class="checkbox" onclick="doHide(this)" >
    <td> <label for="8">gtx-1070</label>
    <td> 
</tr>
 <tr>
    <td> <input type="checkbox" id="9" class="checkbox" onclick="doHide(this)" >
    <td> <label for="9">gtx-1650</label>
    <td> 70270
</tr>
 <tr>
    <td> <input type="checkbox" id="10" class="checkbox" onclick="doHide(this)" >
    <td> <label for="10">gtx-1650-super</label>
    <td> 109900
</tr>
 <tr>
    <td> <input type="checkbox" id="11" class="checkbox" onclick="doHide(this)" >
    <td> <label for="11">gtx-1660</label>
    <td> 119900
</tr>
 <tr>
    <td> <input type="checkbox" id="12" class="checkbox" onclick="doHide(this)" >
    <td> <label for="12">gtx-1660-super</label>
    <td> 139990
</tr>
 <tr>
    <td> <input type="checkbox" id="13" class="checkbox" onclick="doHide(this)" >
    <td> <label for="13">gtx-1660-ti</label>
    <td> 102246
</tr>
 <tr>
    <td> <input type="checkbox" id="14" class="checkbox" onclick="doHide(this)" >
    <td> <label for="14">p1000</label>
    <td> 121000
</tr>
 <tr>
    <td> <input type="checkbox" id="15" class="checkbox" onclick="doHide(this)" >
    <td> <label for="15">p2000</label>
    <td> 168450
</tr>
 <tr>
    <td> <input type="checkbox" id="16" class="checkbox" onclick="doHide(this)" >
    <td> <label for="16">p2200</label>
    <td> 164080
</tr>
 <tr>
    <td> <input type="checkbox" id="17" class="checkbox" onclick="doHide(this)" >
    <td> <label for="17">p4000</label>
    <td> 274900
</tr>
 <tr>
    <td> <input type="checkbox" id="18" class="checkbox" onclick="doHide(this)" >
    <td> <label for="18">p620</label>
    <td> 64699
</tr>
 <tr>
    <td> <input type="checkbox" id="19" class="checkbox" onclick="doHide(this)" >
    <td> <label for="19">r7-240</label>
    <td> 27560
</tr>
 <tr>
    <td> <input type="checkbox" id="20" class="checkbox" onclick="doHide(this)" >
    <td> <label for="20">rtx-2060</label>
    <td> 
</tr>
 <tr>
    <td> <input type="checkbox" id="21" class="checkbox" onclick="doHide(this)" >
    <td> <label for="21">rtx-2070-super</label>
    <td> 
</tr>
 <tr>
    <td> <input type="checkbox" id="22" class="checkbox" onclick="doHide(this)" >
    <td> <label for="22">rtx-2080-super</label>
    <td> 356390
</tr>
 <tr>
    <td> <input type="checkbox" id="23" class="checkbox" onclick="doHide(this)" >
    <td> <label for="23">rtx-2080-ti</label>
    <td> 499990
</tr>
 <tr>
    <td> <input type="checkbox" id="24" class="checkbox" onclick="doHide(this)" >
    <td> <label for="24">rtx-3060-ti</label>
    <td> 359990
</tr>
 <tr>
    <td> <input type="checkbox" id="25" class="checkbox" onclick="doHide(this)" >
    <td> <label for="25">rtx-3070</label>
    <td> 329900
</tr>
 <tr>
    <td> <input type="checkbox" id="26" class="checkbox" onclick="doHide(this)" >
    <td> <label for="26">rtx-3080</label>
    <td> 
</tr>
 <tr>
    <td> <input type="checkbox" id="27" class="checkbox" onclick="doHide(this)" >
    <td> <label for="27">rtx-3090</label>
    <td> 769990
</tr>
 <tr>
    <td> <input type="checkbox" id="28" class="checkbox" onclick="doHide(this)" >
    <td> <label for="28">rtx-4000</label>
    <td> 345280
</tr>
 <tr>
    <td> <input type="checkbox" id="29" class="checkbox" onclick="doHide(this)" >
    <td> <label for="29">rtx-5000</label>
    <td> 778650
</tr>
 <tr>
    <td> <input type="checkbox" id="30" class="checkbox" onclick="doHide(this)" >
    <td> <label for="30">rtx-6000</label>
    <td> 1754300
</tr>
 <tr>
    <td> <input type="checkbox" id="31" class="checkbox" onclick="doHide(this)" >
    <td> <label for="31">rtx-8000</label>
    <td> 2080020
</tr>
 <tr>
    <td> <input type="checkbox" id="32" class="checkbox" onclick="doHide(this)" >
    <td> <label for="32">rx-550</label>
    <td> 27189
</tr>
 <tr>
    <td> <input type="checkbox" id="33" class="checkbox" onclick="doHide(this)" >
    <td> <label for="33">rx-5500-xt</label>
    <td> 105875
</tr>
 <tr>
    <td> <input type="checkbox" id="34" class="checkbox" onclick="doHide(this)" >
    <td> <label for="34">rx-5600</label>
    <td> 
</tr>
 <tr>
    <td> <input type="checkbox" id="35" class="checkbox" onclick="doHide(this)" >
    <td> <label for="35">rx-5600-xt</label>
    <td> 
</tr>
 <tr>
    <td> <input type="checkbox" id="36" class="checkbox" onclick="doHide(this)" >
    <td> <label for="36">rx-570</label>
    <td> 125490
</tr>
 <tr>
    <td> <input type="checkbox" id="37" class="checkbox" onclick="doHide(this)" >
    <td> <label for="37">rx-5700</label>
    <td> 
</tr>
 <tr>
    <td> <input type="checkbox" id="38" class="checkbox" onclick="doHide(this)" >
    <td> <label for="38">rx-5700-xt</label>
    <td> 
</tr>
 <tr>
    <td> <input type="checkbox" id="39" class="checkbox" onclick="doHide(this)" >
    <td> <label for="39">rx-580</label>
    <td> 120520
</tr>
 <tr>
    <td> <input type="checkbox" id="40" class="checkbox" onclick="doHide(this)" >
    <td> <label for="40">rx-6800</label>
    <td> 392580
</tr>
 <tr>
    <td> <input type="checkbox" id="41" class="checkbox" onclick="doHide(this)" >
    <td> <label for="41">rx-vega-56</label>
    <td> 
</tr>
 <tr>
    <td> <input type="checkbox" id="42" class="checkbox" onclick="doHide(this)" >
    <td> <label for="42">wx-2100</label>
    <td> 52890
</tr>
 <tr>
    <td> <input type="checkbox" id="43" class="checkbox" onclick="doHide(this)" >
    <td> <label for="43">wx-3100</label>
    <td> 79190
</tr>
 <tr>
    <td> <input type="checkbox" id="44" class="checkbox" onclick="doHide(this)" >
    <td> <label for="44">wx-3200</label>
    <td> 72280
</tr>
 <tr>
    <td> <input type="checkbox" id="45" class="checkbox" onclick="doHide(this)" >
    <td> <label for="45">wx-4100</label>
    <td> 104990
</tr>
 <tr>
    <td> <input type="checkbox" id="46" class="checkbox" onclick="doHide(this)" >
    <td> <label for="46">wx-5100</label>
    <td> 146990
</tr>
 <tr>
    <td> <input type="checkbox" id="47" class="checkbox" onclick="doHide(this)" >
    <td> <label for="47">wx-7100</label>
    <td> 283962
</tr>
 <tr>
    <td> <input type="checkbox" id="48" class="checkbox" onclick="doHide(this)" >
    <td> <label for="48">wx-8200</label>
    <td> 407340
</tr>

    </tbody>
</table>
